<?xml version="1.0"?>
<robot name="vidhyut_bot">

<!-- <link name="base_footprint">

</link>

<joint name="base_footprint" type="fixed">
  <parent link ="base_footprint"/>
  <child link="base_link"/>
</joint> -->
 
<link name="base_link"></link>

<joint name="base_joint" type="fixed">
  <parent link="base_link"/>
  <child link="chassis"/>
  <origin xyz="0 0 0" rpy="0 0 1.57" />
</joint>
    
<link name="chassis">
  <visual>
    <geometry>
      <mesh filename="file:///home/shwetha/gazebo_task/src/vidhyut_bot/meshes/igvc_bot.dae" scale = '0.001 0.001 0.001'/>
    </geometry>
    <origin xyz="0 0 0" rpy="0 0 0" />
  </visual>
 
  <collision>
    <geometry>
      <mesh filename="file:///home/shwetha/gazebo_task/src/vidhyut_bot/meshes/igvc_bot.dae" scale = '0.001 0.001 0.001'/>
    </geometry>
  <origin xyz="0 0 0" rpy="0 0 0" />
  </collision>


  <inertial>
    <origin xyz="-0.28 -0.03 0" rpy="0 0 0"/>
    <mass value="50"/>
    <inertia
      ixx="1" ixy="0.0" ixz="0.0"
      iyy="1" iyz="0.0"
      izz="1"/>
  </inertial>
</link>

<joint name="wheel_1_joint" type="continuous">
  <parent link="chassis"/>
  <child link="wheel_1_link"/>
  <origin xyz="0 0 0" rpy="0 0 0" />
  <axis xyz="1 0 0" />
  <limit effort="1000" velocity="1000" />
  <dynamics damping="1.0" friction="1.0" />
</joint>
  
<link name="wheel_1_link">
  <visual>
    <origin xyz="0 0 0" rpy="1.570795 0 0"/>
    <geometry>
        <mesh filename="file:///home/shwetha/gazebo_task/src/vidhyut_bot/meshes/igvc_wheel.dae" scale = '0.001 0.001 0.001'/>
    </geometry>
  </visual>

  <collision>
    <origin xyz="0 0 0" rpy="1.570795 0 0"/> 
    <geometry>
      <mesh filename="file:///home/shwetha/gazebo_task/src/vidhyut_bot/meshes/igvc_wheel.dae" scale = '0.001 0.001 0.001'/>
    </geometry>
  </collision>

  <inertial>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <mass value="1"/>
    <inertia
      ixx="1" ixy="0.0" ixz="0.0"
      iyy="1" iyz="0.0"
      izz="1"/>
  </inertial>
</link>

<joint name="wheel_2_joint" type="continuous">
  <parent link="chassis"/>
  <child link="wheel_2_link"/>
  <origin xyz="-0.56 0 0" rpy="0 0 0"/>
  <axis xyz="1 0 0"/>
  <limit effort="1000" velocity="1000" />
  <dynamics damping="1.0" friction="1.0" />
</joint>

<link name="wheel_2_link">
  <visual>
    <origin xyz="0 0 0" rpy="1.570795 0 0"/>
    <geometry>
        <mesh filename="file:///home/shwetha/gazebo_task/src/vidhyut_bot/meshes/igvc_wheel.dae" scale = '0.001 0.001 0.001'/>
    </geometry>
  </visual>
    

  <collision>
    <origin xyz="0 0 0" rpy="1.570795 0 0"/> 
    <geometry>
      <mesh filename="file:///home/shwetha/gazebo_task/src/vidhyut_bot/meshes/igvc_wheel.dae" scale = '0.001 0.001 0.001'/>
    </geometry>
  </collision>

  <inertial>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <mass value="1"/>
    <inertia
      ixx="1" ixy="0.0" ixz="0.0"
      iyy="1" iyz="0.0"
      izz="1"/>
  </inertial>
</link>

<joint name="caster_1_joint" type="fixed">
  <parent link="chassis"/>
  <child link="caster_1_link"/>
  <origin xyz="-0.35 0.3 -0.05" rpy="0 0 0" />
</joint> 


<link name="caster_1_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <sphere radius="0.07"/>
      </geometry>
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/> 
      <geometry>
        <sphere radius="0.07"/>
      </geometry>
    </collision>

    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="1"/>
      <inertia
        ixx="1" ixy="0.0" ixz="0.0"
        iyy="1" iyz="0.0"
        izz="1"/>
    </inertial>
  </link>

<joint name="caster_2_joint" type="fixed">
  <parent link="chassis"/>
  <child link="caster_2_link"/>
  <origin xyz="-0.35 -0.4 -0.05" rpy="0 0 0" />
</joint> 

<link name="caster_2_link">
  <visual>
    <geometry>
      <sphere radius="0.07"/>
    </geometry>
  <origin xyz="0 0 0" rpy="0 0 0"/>
  </visual>

  <collision>
    <geometry>
      <sphere radius="0.07"/>
    </geometry>
  <origin xyz="0 0 0" rpy="0 0 0"/>
  </collision>

  <inertial>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <mass value="1"/>
    <inertia
      ixx="1" ixy="0.0" ixz="0.0"
      iyy="1" iyz="0.0"
      izz="1"/>
  </inertial>
</link>

<joint name="joint_camera" type="fixed">
  <parent link="chassis"/>
  <child link="camera"/>
  <origin xyz="-0.187 -0.18 1.0" rpy="0 0 -1.5708"/> 
</joint>

<link name="camera">
  <visual>
      <geometry>
          <mesh filename="file:///home/shwetha/gazebo_task/src/vidhyut_bot/meshes/zed2i.dae" scale="0.001 0.001 0.001"/>
      </geometry>
      <origin xyz="0 0 0" rpy="0 0 0"/>
  </visual>
  <collision>
      <geometry>
          <mesh filename="file:///home/shwetha/gazebo_task/src/vidhyut_bot/meshes/zed2i.dae" scale="0.001 0.001 0.001"/>
      </geometry>
      <origin xyz="0 0 0" rpy="0 -1.57 0"/>
  </collision>
  <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="1e-50"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6"/>
  </inertial>
</link>

<link name="laser">
  <inertial>
          <mass value="1.0" />
          <inertia ixx="0.004375" ixy="0.0" ixz="0" iyy="0.004375" iyz="0" izz="0.005" />
  </inertial>
  <visual>	 
    <geometry>
      <cylinder radius="0.05" length="0.05"/>
    </geometry>
  </visual>
</link>
<joint name="laser_joint" type="fixed">
  <origin xyz="-0.35 -0.25 0.3" rpy="0 0 0"/>
  <parent link="chassis"/>
  <child link="laser"/>
  <axis xyz="0.0 0.0 1.0"/>
</joint>

<!-- <gazebo reference="laser">
  <sensor name="laser" type="ray">
    <pose> 0 0 0 0 0 0 </pose>
    <visualize>true</visualize>
    <update_rate>10</update_rate>
    <ray> 
      <scan>
          <horizontal>
              <samples>360</samples>
              <min_angle>-4.4</min_angle>
              <max_angle>1.2</max_angle>
          </horizontal>
      </scan>
      <range>
          <min>0.3</min>
          <max>12</max>
      </range>
  </ray>
  <plugin name="laser_controller" filename="libgazebo_ros_ray_sensor.so">
    <ros>
        <argument>~/out:=scan</argument>
    </ros>
    <output_type>sensor_msgs/LaserScan</output_type>
    <frame_name>laser</frame_name>
</plugin>
</sensor>

</gazebo> -->

<gazebo>
  <plugin name='control' filename='libgazebo_ros_diff_drive.so'>
  
      <ros>
          <namespace> </namespace>
      </ros>
  
      <num_wheel_pairs>1</num_wheel_pairs>
  
      <left_joint>wheel_1_joint</left_joint>
      <right_joint>wheel_2_joint</right_joint>
  
      <wheel_seperation>0.56</wheel_seperation>
  
      <wheel_diameter>0.20</wheel_diameter>
  
      <max_wheel_torque>1000</max_wheel_torque>
      <max_wheel_acceleration>5.0</max_wheel_acceleration>
  
      <commandTopic>cmd_vel</commandTopic>
      <odometryTopic>odom</odometryTopic>
      <publish_odom>true</publish_odom>
      <publish_odom_tf>true</publish_odom_tf>
      <publish_wheel_tf>true</publish_wheel_tf>
  
      <odometry_frame>odom</odometry_frame>
      <robot_base_frame>base_link</robot_base_frame>
         <publishWheelJointState>true</publishWheelJointState>
      </plugin>
  </gazebo>
  
   <gazebo reference="camera">
      <sensor type="camera" name="camera1">
        <update_rate>30.0</update_rate>
        <camera name="head">
          <horizontal_fov>1.3962634</horizontal_fov>
          <image>
            <width>800</width>
            <height>800</height>
            <format>R8G8B8</format>
          </image>
          <clip>
            <near>0.02</near>
            <far>300</far>
          </clip>
          <noise>
            <type>gaussian</type>
            <mean>0.0</mean>
            <stddev>0.007</stddev>
          </noise>
        </camera>
        <plugin name="camera_controller" filename="libgazebo_ros_camera.so">
          <alwaysOn>true</alwaysOn>
          <updateRate>0.0</updateRate>
          <cameraName>camera1</cameraName>
          <imageTopicName>image_raw</imageTopicName>
          <cameraInfoTopicName>camera_info</cameraInfoTopicName>
          <frameName>camera_link</frameName>
          <hackBaseline>0.07</hackBaseline>
          <distortionK1>0.0</distortionK1>
          <distortionK2>0.0</distortionK2>
          <distortionK3>0.0</distortionK3>
          <distortionT1>0.0</distortionT1>
          <distortionT2>0.0</distortionT2>
        </plugin>
      </sensor>
    </gazebo>
  </robot>
